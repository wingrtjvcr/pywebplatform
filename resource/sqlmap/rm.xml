<?xml version="1.0" encoding="utf-8"?>
<mapper id="rm">
    <select id="selectMyIssue">
        SELECT 
        cv.value as pjid
        ,pj.name as pjname
        ,issues.id as issid
        ,issues.subject
        ,issues.status_id as statusid
        ,ist.name as statusname
        FROM projects pj 
        INNER JOIN custom_values cv 
        ON pj.id=cv.customized_id 
        AND cv.custom_field_id=2 
        AND cv.`value`!='' 
        INNER JOIN issues 
        ON pj.id=issues.project_id 
        AND issues.status_id in (${status})
        INNER JOIN issue_statuses  ist
        ON ist.id=issues.status_id
        INNER JOIN users 
        ON issues.assigned_to_id=users.id 
        AND users.login=#{loginid}
    </select>

    <select id="selectTodo">
select i.id as issueid,p.name as pjname,t.name as tname,s.name as sname,i.subject 
from bitnami_redmine.issues  as i 
inner join bitnami_redmine.users  as u 
on i.assigned_to_id = u.id 
inner join bitnami_redmine.issue_statuses as s 
on i.status_id = s.id 
inner join bitnami_redmine.projects as p 
on i.project_id = p.id 
inner join bitnami_redmine.trackers as t 
on i.tracker_id = t.id 
where u.login = #{loginid} 
and s.is_closed = 0 
order by 1 desc 
    </select>
    
</mapper>